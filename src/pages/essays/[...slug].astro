---
import { type CollectionEntry, getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import TitleSection from "../../components/TitleSection.astro";
import ContentWrapper from "../../components/ContentWrapper.astro";
import { render } from "astro:content";

export async function getStaticPaths() {
  const essays = await getCollection("essays");
  return essays.map((essay) => ({
    params: { slug: essay.id },
    props: essay,
  }));
}
type Props = CollectionEntry<"essays">;

const essay = Astro.props;
const { Content } = await render(essay);
---

<Layout>
  <TitleSection
    title={essay.data.title}
    id={essay.data.id}
    when={essay.data.when}
  >
    {essay.data.description}
  </TitleSection>

  <ContentWrapper>
    <Content />
  </ContentWrapper>
</Layout>
